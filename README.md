This is the DnD Journey Generator project.

It is designed primarily for DnD 5e, but is hopefully system-agnostic.

TODO: Add further details, instructions, explanation of colour system.

How to use the generator:
The purpose of this generator is to create a random path, or set of paths, from your origin to the end of your journey.
Along this path will be a series of random events, some of which may be dangerous but most of which are simply to break up the monotony of travel.
If you would prefer to skip travel entirely, and simply have the party arrive at their destination after a set amount of time, you're more than welcome to do that, but this generator works best when the journey is a part of the adventure.
To make the adventure interesting, I advise having a few story points in mind to begin with, or that are prompted by events along the way, to place around the map that's created.
It's also usually best to make sure there's at least some amount of choice on the PC's part, for example a long but safe road or a short but dangerous one (though whether such information is entirely accurate is another question).
To this end, I highly recommend using this generator, and reviewing what it gives you, in advance of a session. 
You're of course more than welcome to use it as a tool for at-the-table improv, but you may accidentally create some events which don't entirely make sense.

As a map generator, this program will give you more-or-less a hex grid (though with extra boundaries around the points of interest), colour-coded by terrain type.
The image created is intended as a reference for DMs, since it's far from a work of art at this stage.

If you use this, and create more interesting maps based on what it gives you (as I have done in the past), I'd be very excited to see what you create and hear the stories that come from playing on that map.

Loading Data:
When prompted, enter the name of the file to load. This should be a file previously generated by this program, possibly with alterations made by you.
If you're creating a new map, simply hit enter here.


Creating a journey:
When prompted, enter the distance (of the expected path) for your journey. 
By default this is assumed to be miles, for dnd purposes, but if you prefer to think of it as kilometres or any other unit it won't change how the program operates.
Of course, what really matters is the time taken. By 5e dnd rules, one hour of walking at a normal pace will have your party cover 3 miles. Fast pace covers 4 miles, and  slow pace 2. 
If your party is in some kind of a vehicle, the journey might go much faster, so perhaps you should think about this in terms of multiples of miles, or even how many hours are spent travelling.
Whatever these units are, they'll be treated as the smallest units over which things can happen. IE if each unit is one hour of travel, an encounter or interesting event might happen at the end of each hour while travelling.
If you're not creating a new journey, entering 0 here will have the program load your data and show it (potentially with adjustments).

Terrain types for this generator are based on something between Magic the Gathering terrains (also used as a starting point for colour-coding the map), and those described in the 5e Player's Handbook.

Intractability is a rough measure of how 'interesting' the area is, and how difficult it is to find your way through.
Higher values of intractability mean that you're more likely to have something happen for every mile you travel (the chance, as a percentage, is half the Intractability), and that those things will be more difficult and more rewarding.
The expected result is that time taken, at the table, to get through an area will go up sharply as Intractability increases.
Intractability also sets the maximum suggested DC of challenges encountered at any location, which can be any value from 5 up to Intractability. 
For systems other than dnd 5e, I recommend adjusting these DC recommendations to suit your chosen system.

There is also a chance, at each such event, that the path splits in two.
Depending on how much research happened before they set off, it may not be immediately obvious which path is the better choice, though characters such as Rangers will quickly notice if they're being led astray.
Each such split will create a side-path or loop, which connect to the main path again some time later (later updates will include paths that lead to dead ends, though you're welcome to add these in yourself as a separate journey)
These loops will have their own primary terrain and intractability, based on the point where they split from the main path.

Solving the map:
Once any new events, and side loops, and events on side loops, and side loops on side loops, have been created, the generator will have a list of events, each connected to one or more other events, by a stretch of path of a given length.
The next step is to create a layout, in 2 dimensions, that satisfies the length requirements of all of these connections simultaneously.
It does so using a scoring function, and finding, for each point, what movement would best improve the score.
It does so repeatedly, making a number of attempts at improving the score based on your input. 
Creating the perfect layout may take a very long time, but the generator will always keep its best layout yet (and occasionally revert to that if it gets stuck, or it might start anew and see if it can beat that previous best).
This scoring function shows how much the current layout clashes with its own rules, and a lower score is better.
The number itself is arbitrary, and more complex maps will always have higher scores than simple maps.
Each time the generator creates a new best layout, it will show you the new score, to show that it's still working (and because it's probably quite proud of its progress).
It will also give regular updates, showing how close to finished it is, throughout this process.

The map display:
Once the solving is done, each event will have coordinates that more or less fit the requirements of the path-distances.
Next, the generator will create a hex grid, and overlay these points with the events, before making a set of tiles around all points.
Tiles that are close enough to an event will be given a colour based on the terrain of that event, to roughly show the layout of the terrain.
These colours are arbitrary, and are roughly based on the MtG system of colour-landscape associations, so a stretch of red across the map may indicate a mountain range, while a stretch of blue may represent the course of a river.


Saving your map and reusing it:
After showing the map, the points, event descriptions, and all other details the generator will need to recreate the map can be written to a csv file.
If you give the name of an already existing file, this will be over-written immediately, and previous work in that file may be lost.
If you give the name of a file that doesn't yet exist, python should be able to create one.
Saving, and later reloading, a file means that you can add to a map at a later date.
If your players travel from the city to the coast, following a river, they might then decide to travel up the coast to the next city.
Once they've reached that city, they might again travel inland, crossing a mountain range in order to find a more direct path to where they started.
To accomplish something like this, simply save and re-load your data in the generator, and give in the number (starting from 0, and used in the default event_names) of the locations you're now travelling to or from.

Reading and altering the save file:
The save file is a csv, and should be readable in a number of programs (such as excel or open-office sheets).
In that file, you'll see a number of columns of data, some of which can be adjusted as you see fit, and others which should probably be left alone unless you're very careful.
Most importantly, each of these columns should be the same length, or the generator may not be able to read the data correctly when you try to reuse it.

At the left, you'll find the index numbers of each event. 
These aren't much use by themselves, but are the numbers you'll need to create new paths to/from events.

nextpoint, prevpoint, startpoint, endgoal
These are points that a given event has connections to, either directly or as a start/end of a path they're on.
These are listed as index numbers.

nextdist, prevdist, fromdist, remdist
These are the distances, in miles, of the connections.
They represent the distance (either exact, for direct connections, or maximum, for end goals and start points) to the corresponding index in the previous section.

points
This is the coordinates (in format [x,y]) of each event according to the latest adjustments.
This can be adjusted manually, so long as you maintain the format (adjusting the values of the numbers only).
The next time you load this data, this will be the starting point for calculations, and may be adjusted again by the generator (see Fixed).

Fixed
This determines whether an event is considered a fixed point by the generator.
If this is set to False, the generator will continue to adjust the position of this point in further map-adjustments.
If you set this to True, a point will remain at the location written in points.
By default, new events are created with this set to False, unless those new points are the start or end of a journey.
It is recommended to set this to True for any locations your party has already visited in-game, or identified on a map, as otherwise these points may shift drastically.

event_dcs
This is the recommended DC for challenges occuring at a location, in the format [number].
This data is read by the generator, so changes to format may cause errors, but otherwise this can be adjusted freely.
This value is used when first creating an event, but not afterwards.

colours
These are the single letter codes of the landscape types associated with an event.
This is read by the generator when determining colours for the map.
This value may be changed freely, using only letters from "WUBRGCDAVc", case sensitive.

event_descriptions
The output of a random event generator in the program, using (to a limited extent), the DC and terrain types.
This is not used again by the generator, and may be adjusted freely however you choose.
For example, if you decide the old man mentioned in the event is a named NPC, or the PCs have already been through there once and killed the bandits, you can adjust the text in this field to represent that change.

path_descriptions
this describes each of the direct connections from an event.
This may be changed freely, but is recalculated using event_names, and never read by the program.

paths
the list of which paths and/or loops a given event is on.
This is read by the program when drawing paths on the map, so should not be changed.

event_names
The name of an event, used when generating path_descriptions.
This may be changed freely to whatever is most memorable to you.
The default here is simply "Point" and the index of the point.